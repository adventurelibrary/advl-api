{
  "steps": {
    ":original": {
      "robot": "/upload/handle"
    },
    "filter": {
      "use": ":original",
      "robot": "/file/filter",
      "accepts": [
        [
          "${file.mime}",
          "regex",
          "image"
        ]
      ],
      "error_on_decline": true
    },
    "viruscheck": {
      "use": "filter",
      "robot": "/file/virusscan",
      "error_on_decline": true
    },
    "convert_image_webp": {
      "use": "viruscheck",
      "robot": "/image/resize",
      "format": "webp",
      "imagemagick_stack": "v2.0.7"
    },
    "compress_image": {
      "use": "convert_image_webp",
      "robot": "/image/optimize",
      "progressive": true
    },
    "watermark": {
      "use": "compress_image",
      "robot": "/image/resize",
      "watermark_url": "https://demos.transloadit.com/inputs/transloadit-padded.png",
      "watermark_size": "25%",
      "watermark_position": "bottom-right",
      "imagemagick_stack": "v2.0.7"
    },
    "resize_image": {
      "use": "watermark",
      "robot": "/image/resize",
      "resize_strategy": "fit",
      "width": 100,
      "height": 100,
      "imagemagick_stack": "v2.0.7"
    },
    "export": {
      "use": [
        "convert_image_webp",
        "compress_image",
        "watermark",
        "resize_image"
      ],
      "robot": "/backblaze/store",
      "credentials": "YOUR_BACKBLAZE_CREDENTIALS",
      "path": "path/for/storing/${file.url_name}"
    }
  }
}