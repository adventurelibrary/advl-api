################## DEBUG  #########################
debug_rds:
  handler: src/api/debug/rds.debug_rds
  events:
    - http:
        method: post
        path: /database
        cors: true
  environment:
    ${file(src/dynamic-environment.js):database}
debug_sync:
  handler: src/api/debug/rds.debug_sync
  events:
    - http:
        method: post
        path: /database/sync
        cors: true
  environment:
    ${file(src/dynamic-environment.js):database}
################## USERS  #########################
user_get:
  handler: src/api/users/user.user_get
  events:
    - http: # GET session or create new user if it doesn't exist
        method: get
        path: /users
        cors: true
  environment:
    ${file(src/dynamic-environment.js):user}

user_put:
  handler: src/api/users/user.user_put
  events:
    - http: # PUT updates the currently logged in user
        method: put
        path: /users
        cors: true
  environment:
    ${file(src/dynamic-environment.js):user}
################## CREATORS #########################
creator_get:
  handler: src/api/creators/creator.creator_get
  events:
    - http:
        method: get
        path: /creator/{creatorID}
        cors: true
  environment:
    ${file(src/dynamic-environment.js)):creator}
################## BUNDLES #########################
bundle:
  handler: src/api/assets/bundles.bundle

creators_get:
  handler: src/api/creators/creator.creators_get
  events:
    - http:
        method: get
        path: /creators
        cors: true
  environment:
    ${file(src/dynamic-environment.js)):creator}

creator_post:
  handler: src/api/creators/creator.creator_post
  events:
    - http:
        method: post
        path: /creator
        cors: true
  environment:
    ${file(src/dynamic-environment.js)):creator}

creator_put:
  handler: src/api/creators/creator.creator_put
  events:
    - http:
        method: put
        path: /creator/{creatorID}
        cors: true
  environment:
    ${file(src/dynamic-environment.js)):creator}

################## ASSETS #########################
get_upload_signature:
  handler: src/api/assets/transloadit.get_signature
  events:
    - http:
        method: post
        path: /assets/get_signature
        cors: true
  environment:
    ${file(src/dynamic-environment.js):transloadit}

transloadit_notify:
  handler: src/api/assets/transloadit.transloadit_notify
  events:
    - http:
        method: post
        path: /assets/transloadit
        cors: true
  environment:
    ${file(src/dynamic-environment.js):transloadit}

query_assets:
  handler: src/api/assets/asset.query_assets
  events:
    - http:
        method: get
        path: /assets
        cors: true
  environment:
    ${file(src/dynamic-environment.js):query_assets}

asset_download_link:
  handler: src/api/assets/asset.asset_download_link
  events:
    - http:
        method: get
        path: /assets/{assetID}/download
        cors: true
  environment:
    ${file(src/dynamic-environment.js):asset_download_link}

update_asset:
  handler: src/api/assets/asset.update_asset
  events:
    - http:
        method: put
        path: /assets/update
        cors: true
  environment:
    ${file(src/.env.yml):elastic}

get_asset:
  handler: src/api/assets/asset.get_asset
  events:
    - http:
        method: get
        path: /assets/{assetID}
        cors: true
<<<<<<< HEAD
  environment:
    ${file(src/dynamic-environment.js):query_assets}
=======

get_my_bundles:
  handler: src/api/bundles/bundle.get_my_bundles
  events:
    - http:
        method: get
        path: /my-bundles
        cors: true
>>>>>>> 3ce08ba925d91769691f4e5b0743e4c31093b96c
